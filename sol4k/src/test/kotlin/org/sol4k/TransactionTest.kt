package org.sol4k

import org.junit.jupiter.api.Test
import java.util.Base64
import kotlin.test.assertEquals

internal class TransactionTest {

    @Test
    fun shouldSign() {
        // https://jup.ag/ swap
        val t =
            "AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAoVQxhqYIKKYYeMpA6TRO9mmZnz7F7ey0Arxzusf/Es0tJwccDT11PCgZnvGncl43WttfK2QUfCBVUqNg8vpBi7S3yqkxCBRoNKvUQM6+vM7hdUBgKi+akZpbvaCpd1sVYfl6fiMQT0LnAXBDu2lQOARhtYi5QbgO4L6/gDqyD/dS+fPs/q96K8ow96krYAokWVzZaNzbWKSIcxNgQQzBKEgwkKzcQCjJktPFDq/uMmm1vR0JPHfzTSU/YmDHMVPYs3qLLQ4QY0S20HU2ioqmnunsWIpHYgUUVifOcbOi5XS4HL5/Tq7ETeVhqOTtChh/pFHz+eEhBUyQfl0VMvc6/zgMjqi5tCwzl46rfpfq7Ar6aeSwFEFdHMOzjAsCPJTqq91ipydsU+eIhTH/m/TKngg0D0n/6oHyWCREj1ntWq4ZfgINIPkc3KG4eh6BHDA91d4BVdrP+dBe5F+DHttZ3bCQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALzjEbkBDAlaM77NkXMPfqXNLSveCkWI7UEgNs31WEWCMlyWPTiSJ8bs9ECkUjg2DC1oTmdr/EIQEjnvY2+n4WaXVyp4Ez121kLcUui/jLLFZEz/BwZK3Ilf9B9OcsEAeAwZGb+UhFzL/7K26csOb57yM5bvF9xJrLEObOkAAAAC0P/on9df2SnTAmx8pWHneSwmrNt/J3VFLMhqns4zl6Mb6evO+2606PWXzaqvJdDGxu+TC0vbg5HymAgNFL11hBHnVW/IxwG7udMVuzmgVB/2xst6j9I5RArHNola8E48Gm4hX/quBhPtof2NGGMA12sQ53BrrO1WYoPAAAAAAAQbd9uHXZaGT2cvhRs7reawctIXtX1s3kTqM9YV+/wCpfwvmlw/gXULgLIhT912jP0NhVJRdx73Gp6B8AFCvBgsIDwAFAvPQAgAPAAkDjA4AAAAAAAANBgAFABMLFAEBCwIABQwCAAAAgJaYAAAAAAAUAQUBEQ0GAAkAEQsUAQESGBQABQkSERIQEg4ADAgFCQoCBBQBAwYHEiPlF8uXeuOtKgEAAAAaZAABgJaYAAAAAAA2mRQAAAAAADIAABQDBQAAAQk="
        val testTx =
            "AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAIED52oQcnEB1ydK0URH+Jf+cV387tI6ix7cZQ1EKK7y73qDVdqX3aXwhcyGNdGyzWOjb1OSuRVkQ/Y2BzIqLpVugAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUpTWpkpIQZNJOhxYNo4fHw1td28kruB5B+oQEEFRI0FjqdprFIQv5Gs2y/RSpmX16gQ5U/pkxF8e/tyjcrEKQIDAJwCZDk2M2MwNWUzMzkzZmNhZWRjYjA1ODk2ZGVjY2E0M2ZhYWFmZXlKcGRHVnRJam9pVTJodmQxUnBiV1VpTENKeGRIa2lPakVzSW5WdWFYUmZjSEpwWTJVaU9qQXVNREF3TXl3aVkzVnljbVZ1WTNraU9pSlRUMHdpTENKd1lYbGxjbDkzWVd4c1pYUWlPaUl5TTNoWmIyTjFPREoyWW1VelVrUmxia0ZXUzJKdGRVdEJhSEpGTTI5RlJXNVJZMHRNWW1WMVdWcFFRU0lzSW1Kc2IyTnJhR0Z6YUNJNklrNW9RMnB0ZVdocllVMTZaazB5VmxneWEwSjBWM1ZUYVhWSGNYZHlWV2xVVUhWbVdHcFlOVWRVT0V3aWZRPT0CAgABDAIAAADgkwQAAAAAAA=="
        val swapTx =
            "AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAQAIFA+dqEHJxAdcnStFER/iX/nFd/O7SOose3GUNRCiu8u9Dz/5RwGBLhlqEjhPFeSSqnSXJyqLgu3r7xTpbA8HkYZkdBJEVw0145+0of1+u346cKq6No+88U2FUQT46aOuXoe1I/p3Gy551653GdDPX3KX0D4dWPXyZvsBemb3XlwHkaujssMsQvZd+40Nokc3OhszSwijWbri9e2YZCXtOgygSbEKdpYYJLzX9r8cHtc/3ntWAdu5I2zHvaTSOU6IAqJ+YMkIEDV0Q3c4P3kSkU3NSPfewZKfPl2rnyOTGP8RroUjn7/oNv+4nonLtZCzb5RXYrsdr7tHZHP8MpqlhIy0uXidCcnWdavD6hxYUaSWE2SP5fwo43vmo/9E9mfGSL8zPO9zZ3RLdW0yPCkghKpcpvEb7JLqiOlWJAPBdYGOyQ+0ezK8pEPmQbXwZ8Tz3O52/YACoT20v0iE4A7D1bT5uSog1UvCJZukIsKs1I/e+RGo83Mace/7+wuIkgjMnwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwZGb+UhFzL/7K26csOb57yM5bvF9xJrLEObOkAAAAAEedVb8jHAbu50xW7OaBUH/bGy3qP0jlECsc2iVrwTjwbd9uHXZaGT2cvhRs7reawctIXtX1s3kTqM9YV+/wCpgpflRP9EQGoTt/pkws/6PsbhXfiTXgDHQXDervAT832MlyWPTiSJ8bs9ECkUjg2DC1oTmdr/EIQEjnvY2+n4WbQ/+if11/ZKdMCbHylYed5LCas238ndUUsyGqezjOXoxvp6877brTo9ZfNqq8l0MbG75MLS9uDkfKYCA0UvXWEi0C/dhVJDla9j+DY7xCXVzAR6ttLkaQGoBvs5sfE82gUNAAUCwFwVAA0ACQNkAAAAAAAAABEGAAEAJQwPAQEONw8QAAUKAwETJQ4OEg4pDxAiBiMKJAkHCyomECgdBggcGiEPHyAeGw4mECcUCAMYFxkPFRYCBA4twSCbM0HWnIEGAwAAABEAZAABGmQBAhpkAgMw5gIAAAAAAJDlEgAAAAAAAQAADwMBAAABCQMH99LRJxEhvVJD39QhIbNQafijVcKEM21AqrLRk68POgbo3Ofl3eIDhQDkyEGZwELHhtcaWrwcCmfFBbKjTsFapgi0yt0Ew7p+rxwIDQ8KEwwICxEBDgrd7OlniTrkk7n3FFRrmwSQr7WoiV9Js2hWukyq6EcMA+rs6wKC7Q=="

        val tx = Transaction.from(t)
        val st = Base64.getEncoder().encodeToString(tx.serialize())

        val recoverTx = Transaction.from(st)
        val recoverSt = Base64.getEncoder().encodeToString(recoverTx.serialize())
        assertEquals(recoverSt, st)
    }
}
